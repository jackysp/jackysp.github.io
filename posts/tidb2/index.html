<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to Read TiDB Source Code (Part 2) | Mini Fish</title><meta name=keywords content><meta name=description content="Continuing from the previous article, we learned how to set up the environment for reading code and where to start reading the code. In this part, we&rsquo;ll introduce methods for viewing code based on some common needs.
How to Check the Support Level of a Syntax
There are usually two methods:

Check through the parser repo
Directly check within the TiDB repo

Both of these methods require the environment setup from the previous article. If you haven&rsquo;t tried that yet, give it a go."><meta name=author content="Jack Yu"><link rel=canonical href=https://blog.minifish.org/posts/tidb2/><link crossorigin=anonymous href=/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css integrity="sha256-1vzSCk+4bvpN+sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.minifish.org/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.minifish.org/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.minifish.org/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.minifish.org/apple-touch-icon.png><link rel=mask-icon href=https://blog.minifish.org/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.minifish.org/posts/tidb2/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-G0H8JF722Y"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G0H8JF722Y")}</script><meta property="og:url" content="https://blog.minifish.org/posts/tidb2/"><meta property="og:site_name" content="Mini Fish"><meta property="og:title" content="How to Read TiDB Source Code (Part 2)"><meta property="og:description" content="Continuing from the previous article, we learned how to set up the environment for reading code and where to start reading the code. In this part, we’ll introduce methods for viewing code based on some common needs.
How to Check the Support Level of a Syntax There are usually two methods:
Check through the parser repo Directly check within the TiDB repo Both of these methods require the environment setup from the previous article. If you haven’t tried that yet, give it a go."><meta property="og:locale" content="en-US"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-07-12T12:09:00+08:00"><meta property="article:modified_time" content="2020-07-12T12:09:00+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to Read TiDB Source Code (Part 2)"><meta name=twitter:description content="Continuing from the previous article, we learned how to set up the environment for reading code and where to start reading the code. In this part, we&rsquo;ll introduce methods for viewing code based on some common needs.
How to Check the Support Level of a Syntax
There are usually two methods:

Check through the parser repo
Directly check within the TiDB repo

Both of these methods require the environment setup from the previous article. If you haven&rsquo;t tried that yet, give it a go."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.minifish.org/posts/"},{"@type":"ListItem","position":2,"name":"How to Read TiDB Source Code (Part 2)","item":"https://blog.minifish.org/posts/tidb2/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to Read TiDB Source Code (Part 2)","name":"How to Read TiDB Source Code (Part 2)","description":"Continuing from the previous article, we learned how to set up the environment for reading code and where to start reading the code. In this part, we\u0026rsquo;ll introduce methods for viewing code based on some common needs.\nHow to Check the Support Level of a Syntax There are usually two methods:\nCheck through the parser repo Directly check within the TiDB repo Both of these methods require the environment setup from the previous article. If you haven\u0026rsquo;t tried that yet, give it a go.\n","keywords":[],"articleBody":"Continuing from the previous article, we learned how to set up the environment for reading code and where to start reading the code. In this part, we’ll introduce methods for viewing code based on some common needs.\nHow to Check the Support Level of a Syntax There are usually two methods:\nCheck through the parser repo Directly check within the TiDB repo Both of these methods require the environment setup from the previous article. If you haven’t tried that yet, give it a go.\nPreparation Install GoYacc Support\nThe GoYacc Support plugin is a creation by a colleague at our company, a third-party plugin officially accepted by JetBrains, a well-regarded product. It includes syntax highlighting and intelligence, which is great!\nDownload parser repo\nIf you’re checking syntax directly from the parser, you need to download it manually. If you’re navigating from TiDB, IDEA will automatically download the code, so no extra steps are needed.\nCheck via parser repo Open the parser using IDEA, switch to the branch you need, and locate the parser.y file. However, it is more recommended to check from within TiDB.\nCheck via TiDB repo Open the TiDB project with IDEA and switch to the required branch\nFind the parser.y file; make sure to select the broadest search scope\nAlternatively, you can find it in the file list,\nLet’s take checking the SHOW ENGINES SQL statement as an example.\nThe entry point for the entire statement parsing is Start. Below it is the StatementList, followed by Statement. Under the large list of Statements, you can find ShowStmt.\nHowever, ShowStmt is actually quite complex. Another way is to directly search for ShowEngines within parser.y, since naming follows Golang conventions, with camel case and capitalized letters for public exposure. Naturally, if familiar with the code, you’d know ShowEngines is under ShowTargetFilterable. Its first branch is ShowEngines.\nWhat is the level of support for SHOW ENGINES?\nYou can look at how ast.ShowEngines is processed. Here, you can’t just jump to it; you need to copy and search.\nYou only need to see how it’s processed under TiDB, and you can skip test files.\nOne is the actual implementation,\nThe other is the build schema, which you can ignore for now,\nEntering fetchShowEngines, you can see the specific implementation is simple, running an internal SQL to read a system table.\nChecking SHOW ENGINES ends here. You can see that it’s fully supported.\nWhich statements only have syntax support?\nTaking the temporary table creation syntax as an example, find its position in the parser.y file.\nIt’s an option.\nYou can see that if the temporary table option is specified, it simply returns true with an attached warning, stating that the table is still treated as a regular table. Previously, the parser had a lot of operations that only returned without doing anything, not even a warning, but these are now rare.\nAdvantages of Querying via TiDB repo You can see that checking via the TiDB repo allows you to find the parser’s detailed hash using IDEA. If you check directly via the parser, you need to first look up the parser’s hash in TiDB’s go.mod, then check out to the corresponding hash in the parser. If you need to check specific implementations, you have to go back to TiDB, making back-and-forth checks less convenient compared to looking within a single project. The only advantage is the ease of blaming commit history.\nViewing and Modifying Default Configuration The default configurations can be easily viewed in TiDB, specifically the variable defaultConf. The configurations listed here are the actual default settings.\nTaking the first Host configuration as an example, it has a mapping to toml and json files.\nThis essentially shows how it’s written in a toml file. The DefHost following it is the specific default value.\nSomething important to note is that configurations have a hierarchical relationship. For example, the log-related configuration in the configuration file is:\nIn the code, it is represented as:\nThis denotes a configuration called “level” under the log configuration.\nWhat if you want to add more levels? For instance, the most complex configuration for CopCache adds another layer under tikv-client called copr-cache.\nSince toml files do not support multi-level nesting, this leads to the most complex configuration writing in TiDB.\nTo use non-default configurations with the TiDB started through IDEA as mentioned above, the simplest way is to modify this defaultConf.\nSummary From this, you can see that checking whether a statement is supported, and whether it’s just syntax support or has a specific implementation, can be achieved with the described methods. You also learned how to view and modify default configurations, allowing you to conduct some verifications yourself. In the next article, I plan to introduce TiDB’s system variables.\n","wordCount":"791","inLanguage":"en","datePublished":"2020-07-12T12:09:00+08:00","dateModified":"2020-07-12T12:09:00+08:00","author":{"@type":"Person","name":"Jack Yu"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.minifish.org/posts/tidb2/"},"publisher":{"@type":"Organization","name":"Mini Fish","logo":{"@type":"ImageObject","url":"https://blog.minifish.org/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.minifish.org/ accesskey=h title="Mini Fish (Alt + H)">Mini Fish</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.minifish.org/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://blog.minifish.org/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.minifish.org/>Home</a>&nbsp;»&nbsp;<a href=https://blog.minifish.org/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">How to Read TiDB Source Code (Part 2)</h1><div class=post-meta><span title='2020-07-12 12:09:00 +0800 +0800'>July 12, 2020</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;791 words&nbsp;·&nbsp;Jack Yu&nbsp;|&nbsp;<a href=https://github.com/jackysp/blog/tree/master/content/posts/tidb2.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#how-to-check-the-support-level-of-a-syntax>How to Check the Support Level of a Syntax</a><ul><li><a href=#preparation>Preparation</a></li><li><a href=#check-via-parser-repo>Check via parser repo</a></li><li><a href=#check-via-tidb-repo>Check via TiDB repo</a></li></ul></li><li><a href=#viewing-and-modifying-default-configuration>Viewing and Modifying Default Configuration</a></li><li><a href=#summary>Summary</a></li></ul></nav></div></details></div><div class=post-content><p>Continuing from <a href=/posts/tidb1>the previous article</a>, we learned how to set up the environment for reading code and where to start reading the code. In this part, we&rsquo;ll introduce methods for viewing code based on some common needs.</p><h2 id=how-to-check-the-support-level-of-a-syntax>How to Check the Support Level of a Syntax<a hidden class=anchor aria-hidden=true href=#how-to-check-the-support-level-of-a-syntax>#</a></h2><p>There are usually two methods:</p><ol><li>Check through the parser repo</li><li>Directly check within the TiDB repo</li></ol><p>Both of these methods require the <a href=/posts/tidb1#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA>environment setup from the previous article</a>. If you haven&rsquo;t tried that yet, give it a go.</p><h3 id=preparation>Preparation<a hidden class=anchor aria-hidden=true href=#preparation>#</a></h3><ol><li><p>Install GoYacc Support</p><p><img alt=goyacc loading=lazy src=/posts/images/20200712124300.png></p><p>The GoYacc Support plugin is a creation by a colleague at our company, a third-party plugin officially accepted by JetBrains, a well-regarded product. It includes syntax highlighting and intelligence, which is great!</p></li><li><p>Download <a href=https://github.com/pingcap/parser>parser repo</a></p><p>If you&rsquo;re checking syntax directly from the parser, you need to download it manually. If you&rsquo;re navigating from TiDB, IDEA will automatically download the code, so no extra steps are needed.</p></li></ol><h3 id=check-via-parser-repo>Check via parser repo<a hidden class=anchor aria-hidden=true href=#check-via-parser-repo>#</a></h3><p>Open the parser using IDEA, switch to the branch you need, and locate the parser.y file. However, it is more recommended to check from within TiDB.</p><h3 id=check-via-tidb-repo>Check via TiDB repo<a hidden class=anchor aria-hidden=true href=#check-via-tidb-repo>#</a></h3><ol><li><p>Open the TiDB project with IDEA and switch to the required branch</p><p><img alt=co loading=lazy src=/posts/images/20200712183012.png></p></li><li><p>Find the parser.y file; make sure to select the broadest search scope</p><p><img alt=parser.y loading=lazy src=/posts/images/20200712183658.png></p><p>Alternatively, you can find it in the file list,</p><p><img alt=parser.y2 loading=lazy src=/posts/images/20200712184101.png></p><p><img alt=parser.y3 loading=lazy src=/posts/images/20200712184157.png></p></li></ol><p>Let&rsquo;s take checking the <code>SHOW ENGINES</code> SQL statement as an example.</p><p>The entry point for the entire statement parsing is <a href=https://github.com/pingcap/parser/blob/f56688124d8bbba98ca103dbcc667d0e3b9bef30/parser.y#L1309-L1308>Start</a>. Below it is the StatementList, followed by Statement. Under the large list of Statements, you can find ShowStmt.</p><p><img alt=parser.y4 loading=lazy src=/posts/images/20200712184841.png></p><p>However, ShowStmt is actually quite complex. Another way is to directly search for <code>ShowEngines</code> within parser.y, since naming follows Golang conventions, with camel case and capitalized letters for public exposure. Naturally, if familiar with the code, you&rsquo;d know <code>ShowEngines</code> is under <code>ShowTargetFilterable</code>. Its first branch is <code>ShowEngines</code>.</p><p><img alt=parser.y5 loading=lazy src=/posts/images/20200712185533.png></p><p><strong>What is the level of support for <code>SHOW ENGINES</code>?</strong></p><p>You can look at how <code>ast.ShowEngines</code> is processed. Here, you can&rsquo;t just jump to it; you need to copy and search.</p><p><img alt=parser.y6 loading=lazy src=/posts/images/20200712190242.png></p><p>You only need to see how it&rsquo;s processed under TiDB, and you can skip test files.</p><p><img alt=parser.y7 loading=lazy src=/posts/images/20200712190752.png></p><p>One is the actual implementation,</p><p><img alt=parser.y7 loading=lazy src=/posts/images/20200712190839.png></p><p>The other is the build schema, which you can ignore for now,</p><p><img alt=parser.y7 loading=lazy src=/posts/images/20200712190956.png></p><p>Entering <code>fetchShowEngines</code>, you can see the specific implementation is simple, running an internal SQL to read a system table.</p><p><img alt=parser.y7 loading=lazy src=/posts/images/20200712191054.png></p><p>Checking <code>SHOW ENGINES</code> ends here. You can see that it&rsquo;s fully supported.</p><p><strong>Which statements only have syntax support?</strong></p><p>Taking the temporary table creation syntax as an example, find its position in the parser.y file.</p><p><img alt=parser.y8 loading=lazy src=/posts/images/20200712191711.png></p><p>It&rsquo;s an option.</p><p><img alt=parser.y9 loading=lazy src=/posts/images/20200712191843.png></p><p>You can see that if the temporary table option is specified, it simply returns true with an attached warning, stating that the table is still treated as a regular table. Previously, the parser had a lot of operations that only returned without doing anything, not even a warning, but these are now rare.</p><h4 id=advantages-of-querying-via-tidb-repo>Advantages of Querying via TiDB repo<a hidden class=anchor aria-hidden=true href=#advantages-of-querying-via-tidb-repo>#</a></h4><p>You can see that checking via the TiDB repo allows you to find the parser&rsquo;s detailed hash using IDEA. If you check directly via the parser, you need to first look up the parser’s hash in TiDB’s go.mod, then check out to the corresponding hash in the parser. If you need to check specific implementations, you have to go back to TiDB, making back-and-forth checks less convenient compared to looking within a single project. The only advantage is the ease of blaming commit history.</p><h2 id=viewing-and-modifying-default-configuration>Viewing and Modifying Default Configuration<a hidden class=anchor aria-hidden=true href=#viewing-and-modifying-default-configuration>#</a></h2><p>The default configurations can be easily viewed in TiDB, specifically the variable <a href=https://github.com/pingcap/tidb/blob/72f6a0405837b92e40de979a4f3134d9aa19a5b3/config/config.go#L547>defaultConf</a>. The configurations listed here are the actual default settings.</p><p><img alt=conf1 loading=lazy src=/posts/images/20200713172228.png></p><p>Taking the first Host configuration as an example, it has a mapping to toml and json files.</p><p><img alt=conf2 loading=lazy src=/posts/images/20200713172535.png></p><p>This essentially shows how it&rsquo;s written in a toml file. The <code>DefHost</code> following it is the specific default value.</p><p><img alt=conf3 loading=lazy src=/posts/images/20200713180137.png></p><p>Something important to note is that configurations have a hierarchical relationship. For example, the log-related configuration in the configuration file is:</p><p><img alt=conf4 loading=lazy src=/posts/images/20200715164756.png></p><p>In the code, it is represented as:</p><p><img alt=conf5 loading=lazy src=/posts/images/20200715164930.png></p><p>This denotes a configuration called &ldquo;level&rdquo; under the log configuration.</p><p>What if you want to add more levels? For instance, the most complex configuration for CopCache adds another layer under tikv-client called copr-cache.</p><p><img alt=conf6 loading=lazy src=/posts/images/20200715165243.png></p><p>Since toml files do not support multi-level nesting, this leads to the most complex configuration writing in TiDB.</p><p><img alt=conf6 loading=lazy src=/posts/images/20200715165456.png></p><p>To use non-default configurations with the TiDB started through IDEA as mentioned above, the simplest way is to modify this defaultConf.</p><h2 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h2><p>From this, you can see that checking whether a statement is supported, and whether it’s just syntax support or has a specific implementation, can be achieved with the described methods. You also learned how to view and modify default configurations, allowing you to conduct some verifications yourself. In the next article, I plan to introduce TiDB’s system variables.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://blog.minifish.org/posts/tidb3/><span class=title>« Prev</span><br><span>How to Read the Source Code of TiDB (Part 3)</span>
</a><a class=next href=https://blog.minifish.org/posts/tidb1/><span class=title>Next »</span><br><span>How to Read TiDB Source Code (Part 1)</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share How to Read TiDB Source Code (Part 2) on x" href="https://x.com/intent/tweet/?text=How%20to%20Read%20TiDB%20Source%20Code%20%28Part%202%29&amp;url=https%3a%2f%2fblog.minifish.org%2fposts%2ftidb2%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to Read TiDB Source Code (Part 2) on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.minifish.org%2fposts%2ftidb2%2f&amp;title=How%20to%20Read%20TiDB%20Source%20Code%20%28Part%202%29&amp;summary=How%20to%20Read%20TiDB%20Source%20Code%20%28Part%202%29&amp;source=https%3a%2f%2fblog.minifish.org%2fposts%2ftidb2%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to Read TiDB Source Code (Part 2) on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.minifish.org%2fposts%2ftidb2%2f&title=How%20to%20Read%20TiDB%20Source%20Code%20%28Part%202%29"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to Read TiDB Source Code (Part 2) on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.minifish.org%2fposts%2ftidb2%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to Read TiDB Source Code (Part 2) on whatsapp" href="https://api.whatsapp.com/send?text=How%20to%20Read%20TiDB%20Source%20Code%20%28Part%202%29%20-%20https%3a%2f%2fblog.minifish.org%2fposts%2ftidb2%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to Read TiDB Source Code (Part 2) on telegram" href="https://telegram.me/share/url?text=How%20to%20Read%20TiDB%20Source%20Code%20%28Part%202%29&amp;url=https%3a%2f%2fblog.minifish.org%2fposts%2ftidb2%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to Read TiDB Source Code (Part 2) on ycombinator" href="https://news.ycombinator.com/submitlink?t=How%20to%20Read%20TiDB%20Source%20Code%20%28Part%202%29&u=https%3a%2f%2fblog.minifish.org%2fposts%2ftidb2%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://utteranc.es/client.js repo=jackysp/jackysp.github.io issue-term=pathname theme=preferred-color-scheme crossorigin=anonymous async></script></article></main><footer class=footer><span>2014-present</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>