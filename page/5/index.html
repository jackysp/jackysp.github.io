<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.140.0-DEV"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Mini Fish</title><meta name=description content="A Collection of Straightforward HOW-TO Guides"><meta name=author content="Jack Yu"><link rel=canonical href=https://blog.minifish.org/><link crossorigin=anonymous href=/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css integrity="sha256-1vzSCk+4bvpN+sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.minifish.org/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.minifish.org/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.minifish.org/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.minifish.org/apple-touch-icon.png><link rel=mask-icon href=https://blog.minifish.org/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://blog.minifish.org/index.xml><link rel=alternate type=application/json href=https://blog.minifish.org/index.json><link rel=alternate hreflang=en href=https://blog.minifish.org/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-G0H8JF722Y"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G0H8JF722Y")}</script><meta property="og:url" content="https://blog.minifish.org/"><meta property="og:site_name" content="Mini Fish"><meta property="og:title" content="Mini Fish"><meta property="og:description" content="A Collection of Straightforward HOW-TO Guides"><meta property="og:locale" content="en-US"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Mini Fish"><meta name=twitter:description content="A Collection of Straightforward HOW-TO Guides"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Mini Fish","url":"https://blog.minifish.org/","description":"A Collection of Straightforward HOW-TO Guides","logo":"https://blog.minifish.org/favicon.ico","sameAs":["https://x.com/jackysp","https://github.com/jackysp","https://www.linkedin.com/in/shuaipeng-yu-81280434/","mailto:i@minifish.org"]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.minifish.org/ accesskey=h title="Mini Fish (Alt + H)">Mini Fish</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.minifish.org/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://blog.minifish.org/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>How to Read the Source Code of TiDB (Part 3)</h2></header><div class=entry-content><p>In the previous article, we introduced methods for viewing syntax and configurations. In this article, we will discuss how to view system variables, including default values, scopes, and how to monitor metrics.
System Variables The system variable names in TiDB are defined in tidb_vars.go. This file also includes some default values for variables, but the place where they are actually assembled is defaultSysVars.
This large struct array defines the scope, variable names, and default values for all variables in TiDB. Besides TiDB’s own system variables, it also includes compatibility with MySQL’s system variables.
...</p></div><footer class=entry-footer><span title='2020-07-28 11:47:00 +0800 +0800'>July 28, 2020</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;1659 words&nbsp;·&nbsp;Jack Yu</footer><a class=entry-link aria-label="post link to How to Read the Source Code of TiDB (Part 3)" href=https://blog.minifish.org/posts/tidb3/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>How to Read TiDB Source Code (Part 2)</h2></header><div class=entry-content><p>Continuing from the previous article, we learned how to set up the environment for reading code and where to start reading the code. In this part, we’ll introduce methods for viewing code based on some common needs.
How to Check the Support Level of a Syntax There are usually two methods:
Check through the parser repo Directly check within the TiDB repo Both of these methods require the environment setup from the previous article. If you haven’t tried that yet, give it a go.
...</p></div><footer class=entry-footer><span title='2020-07-12 12:09:00 +0800 +0800'>July 12, 2020</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;791 words&nbsp;·&nbsp;Jack Yu</footer><a class=entry-link aria-label="post link to How to Read TiDB Source Code (Part 2)" href=https://blog.minifish.org/posts/tidb2/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>How to Read TiDB Source Code (Part 1)</h2></header><div class=entry-content><p>Background There are many articles on reading the source code of TiDB, often referred to as the “Twenty-Four Chapters Scriptures”. However, these introductions typically proceed from a macro to a micro perspective. This series attempts to introduce how to read TiDB’s source code from an easier angle. The goals we aim to achieve are:
Enable readers to start reading TiDB’s code themselves, rather than understanding it passively through pre-written articles. Provide some common examples of looking into the details of the code, such as examining the scope of a variable. After all, teaching people to fish is better than giving them fish. While the code changes often, the methods remain mostly unchanged.
...</p></div><footer class=entry-footer><span title='2020-07-06 16:51:00 +0800 +0800'>July 6, 2020</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;1250 words&nbsp;·&nbsp;Jack Yu</footer><a class=entry-link aria-label="post link to How to Read TiDB Source Code (Part 1)" href=https://blog.minifish.org/posts/tidb1/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>How to Use Docker on Windows</h2></header><div class=entry-content><p>Background I had to install Docker on Windows to reproduce a bug.
Process Using Windows 10 as an example, if you have the Home Basic version, you’ll need to pay to upgrade to the Pro version because you need to enable Hyper-V and Container features, which costs about 800 RMB. Install everything with the default settings, and do not switch to Windows Containers, since most images are still under Linux. If you do switch, you can restore it after starting up. If you encounter permission issues with shared folders, follow the instructions at link. However, this might not solve the problem, and you might encounter a sharing failure. In that case, go to the settings, troubleshoot, and reset to factory defaults. After resetting, ensure the shared folders are selected. When you encounter errors during use, just try a few more times. It might work; if not, reset it. Impressions Initially, there were no issues using Docker on Linux; Docker itself was simple back then. Later, using it on Mac brought changes, including a user interface, various colors, and numerous bugs. Right from the start, I encountered bugs. Docker did not support Windows a long time ago, and given the various bugs on Mac, I didn’t have high expectations. The results were still quite surprising. In summary, here are a few points:
...</p></div><footer class=entry-footer><span title='2020-04-13 10:34:00 +0800 +0800'>April 13, 2020</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;269 words&nbsp;·&nbsp;Jack Yu</footer><a class=entry-link aria-label="post link to How to Use Docker on Windows" href=https://blog.minifish.org/posts/docker-win/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>How to Prevent a Linux Laptop from Entering Sleep Mode When the Lid is Closed</h2></header><div class=entry-content><p>Initially, I thought it would be a simple setting adjustment, so I casually Googled it. Sure enough, there was a unanimous solution: modify /etc/systemd/logind.conf, change HandleLidSwitch to ignore or lock, and then restart logind or reboot.
I tried this, but it didn’t work at all on my Thinkpad X230. I then tried changing some other options in the aforementioned file, but none worked, and surprisingly, Ubuntu even reported errors.
So, I reinstalled the more preferred Debian. Tried again, and it still didn’t work. Finally, I found a more brutal method.
...</p></div><footer class=entry-footer><span title='2020-03-31 20:31:00 +0800 +0800'>March 31, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;171 words&nbsp;·&nbsp;Jack Yu</footer><a class=entry-link aria-label="post link to How to Prevent a Linux Laptop from Entering Sleep Mode When the Lid is Closed" href=https://blog.minifish.org/posts/nosleeplinux/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://blog.minifish.org/page/4/>«&nbsp;Prev&nbsp;4/9
</a><a class=next href=https://blog.minifish.org/page/6/>Next&nbsp;6/9&nbsp;»</a></nav></footer></main><footer class=footer><span>© Mini Fish 2014-present</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>